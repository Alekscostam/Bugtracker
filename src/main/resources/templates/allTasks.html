<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:custom="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>

    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <title>My Tasks</title>

    <link th:href="@{/css/style.css}" rel="stylesheet"/>



    <script>

        function myFunction() {

            var xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange=function()
            {
                if (this.readyState === 4 && this.status === 200) {
                    // Typical action to be performed when the document is ready:
                    var a = JSON.parse(JSON.stringify(xhttp.responseText)) ;
                    console.log(a.toString());
                   // console.log(a);
                }
            }
            var id = document.getElementById("box1");

            xhttp.open("GET", "/getActuallyTasksByProjectId?projectId="+ id.options[id.selectedIndex].value, true);
            xhttp.send();

        }
    </script>

</head>


<body>



<div style="width: 100%; height: 100%; min-height: 100%; min-width: 100%">
    <nav style="width: 100%; height: 70px;  background-color: darkgray; color: white; border-style: outset"><h1
            style="color: lightgray">MpgaBUG - make program great again</h1>


    </nav>
    <section style="width: 15%; height: 100%; float: left; border-style: outset ;  background-color:lightgray;">
        <ul><br>
            <a class="links" href="/allTasks">All tasks</a><br>
            <a class="links" href="/createIssue">Add issue</a><br>
            <a class="links" href="/createProject">Add new Project</a><br>
            <a class="links" href="/openTasks">Open tasks</a><br>
            <a class="links" href="/inProgressTasks">In progress tasks</a><br>
            <a class="links" href="/toAnalyze">To analyze</a><br>
        </ul>
    </section>
    <aside style="width: 85%; height: 100%; float: left; background-color:transparent;">

        <h3>
            <form action="/getActuallyTasksByProjectId" method="get">
            <select id="box1" style=" margin: 50px; width:  20%" onchange="myFunction()" name="projectId">
                <option value="" disabled selected>Select project</option>
                <option th:each="project: ${projects}" th:value="${project.id}" th:text="${project.name}"  ></option>
            </select>
                <input type="submit" value="find tasks">
            </form>
        </h3>

        <table style="margin: 50px" border="1">
            <tr>
                <th class="thStyle" width="300px">Date</th>
                <th class="thStyle" width="300px">State</th>
                <th class="thStyle" width="200px">Employees</th>
                <th class="thStyle" width="500px">Description</th>
                <th class="thStyle" style="width: auto">Operacja</th>
                <!--                <th class="thStyle" width="100px">Description</th>-->
            </tr>

            <tr class="trStyle">
                <td>Jill</td>
                <td>Smith</td>
                <td>50</td>
                <td>50</td>
                <td style="border: none">
                    <button>info</button>
                    <button style="background: green">Take</button>
                    <button style="background: orange">Join</button>
                    <button style="background: red">Leave</button>
                </td>
            </tr>
            <tr class="trStyle">
                <td>Eve</td>
                <td>Jackson</td>
                <td>94</td>
                <td>94</td>
                <td style="border: none">
                    <button>info</button>
                    <button style="background: #008000">Take</button>
                    <button style="background: orange">Join</button>
                    <button style="background: red">Leave</button>
                </td>
            </tr>
            <tr class="trStyle">
                <td>Eve</td>
                <td>sad</td>
                <td>94</td>
                <td>94</td>
                <td style="border: none">
                    <button>info</button>
                    <button style="background: green">Take</button>
                    <button style="background: orange">Join</button>
                    <button style="background: red">Leave</button>
                </td>
            </tr>
            <tr class="trStyle">
                <td>Eve</td>
                <td>Jackson</td>
                <td>94</td>
                <td>94</td>
                <td style="border: none">
                    <button>info</button>
                    <button style="background: green">Take</button>
                    <button style="background: orange">Join</button>
                    <button style="background: red">Leave</button>
                </td>
            </tr>
        </table>
    </aside>

</div>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>


</body>
</html>